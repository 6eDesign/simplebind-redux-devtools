{"version":3,"file":"simplebind-redux-devtools.umd.js","sources":["../index.js"],"sourcesContent":["import simpleBind from 'simplebind.js';\r\n\r\nlet { bind, registerPlugin, util } = simpleBind;\r\nlet state = simpleBind.getState();\r\n\r\nconst useDevTools = typeof window.__REDUX_DEVTOOLS_EXTENSION__ != 'undefined'; \r\nlet devTools, isBindDueToDevTools = false;\r\nif(useDevTools) { \r\n  devTools = window.__REDUX_DEVTOOLS_EXTENSION__.connect({latency: 0});\r\n  devTools.subscribe((message,...args) => {\r\n    if (message.type === 'DISPATCH' && message.state) {\r\n      let newState = JSON.parse(message.state); \r\n      for(var key in newState) {\r\n        isBindDueToDevTools = true;\r\n        bind(key,newState[key]);\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nlet isARepeatKey = name => name.indexOf('__repeat') == 0;\r\n\r\nlet removeRepeatsFromState = obj => { \r\n  let newObj = Object.keys(obj).reduce((newObj,key) => { \r\n    if(!isARepeatKey(key)) newObj[key] = obj[key]; \r\n    return newObj;\r\n  },{}); \r\n  return newObj;\r\n}; \r\n\r\nlet onBind = (objName,obj) => { \r\n  if(isARepeatKey(objName)) return; \r\n  var eligibleForDevTools = isBindDueToDevTools == false; \r\n  if(isBindDueToDevTools) isBindDueToDevTools = false;\r\n  if(!isARepeatKey(objName) && eligibleForDevTools) {\r\n    devTools.send(`${objName}-bound`, removeRepeatsFromState(state.boundObjects))\r\n  } \r\n  return obj;\r\n};\r\n\r\nregisterPlugin({\r\n  name: 'reduxDevToolsConnector',\r\n  postBind: onBind\r\n});"],"names":["let","const"],"mappings":";;;;;;;;EAEA;EAAY;EAAgB,2BAAoB;EAChDA,IAAI,KAAK,GAAG,UAAU,CAAC,QAAQ,EAAE,CAAC;;EAElCC,IAAM,WAAW,GAAG,OAAO,MAAM,CAAC,4BAA4B,IAAI,WAAW,CAAC;EAC9ED,IAAI,QAAQ,EAAE,mBAAmB,GAAG,KAAK,CAAC;EAC1C,GAAG,WAAW,EAAE;IACd,QAAQ,GAAG,MAAM,CAAC,4BAA4B,CAAC,OAAO,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC,CAAC;IACrE,QAAQ,CAAC,SAAS,WAAE,OAAe,EAAE;;;;MACnC,IAAI,OAAO,CAAC,IAAI,KAAK,UAAU,IAAI,OAAO,CAAC,KAAK,EAAE;QAChDA,IAAI,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QACzC,IAAI,IAAI,GAAG,IAAI,QAAQ,EAAE;UACvB,mBAAmB,GAAG,IAAI,CAAC;UAC3B,IAAI,CAAC,GAAG,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC;SACzB;OACF;KACF,CAAC,CAAC;GACJ;;EAEDA,IAAI,YAAY,aAAG,MAAK,SAAG,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,IAAC,CAAC;;EAEzDA,IAAI,sBAAsB,aAAG,KAAI;IAC/BA,IAAI,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,MAAM,WAAE,MAAM,CAAC,GAAG,EAAE;MAChD,GAAG,CAAC,YAAY,CAAC,GAAG,CAAC,IAAE,MAAM,CAAC,GAAG,CAAC,GAAG,GAAG,CAAC,GAAG,CAAC,GAAC;MAC9C,OAAO,MAAM,CAAC;KACf,CAAC,EAAE,CAAC,CAAC;IACN,OAAO,MAAM,CAAC;GACf,CAAC;;EAEFA,IAAI,MAAM,aAAI,OAAO,CAAC,GAAG,EAAE;IACzB,GAAG,YAAY,CAAC,OAAO,CAAC,IAAE,SAAO;IACjC,IAAI,mBAAmB,GAAG,mBAAmB,IAAI,KAAK,CAAC;IACvD,GAAG,mBAAmB,IAAE,mBAAmB,GAAG,KAAK,GAAC;IACpD,GAAG,CAAC,YAAY,CAAC,OAAO,CAAC,IAAI,mBAAmB,EAAE;MAChD,QAAQ,CAAC,IAAI,EAAI,OAAO,cAAU,sBAAsB,CAAC,KAAK,CAAC,YAAY,CAAC,EAAC;KAC9E;IACD,OAAO,GAAG,CAAC;GACZ,CAAC;;EAEF,cAAc,CAAC;IACb,IAAI,EAAE,wBAAwB;IAC9B,QAAQ,EAAE,MAAM;GACjB,CAAC;;;;"}