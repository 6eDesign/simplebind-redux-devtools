{"version":3,"file":"simplebind-redux-devtools.umd.js","sources":["../index.js"],"sourcesContent":["import simpleBind from 'simplebind.js';\r\n\r\nlet { bind, registerPlugin, util } = simpleBind;\r\nlet state = simpleBind.getState();\r\n\r\nconst useDevTools = typeof window.__REDUX_DEVTOOLS_EXTENSION__ != 'undefined'; \r\nlet devTools, isBindDueToDevTools = false;\r\nif(useDevTools) { \r\n  devTools = window.__REDUX_DEVTOOLS_EXTENSION__.connect({latency: 0});\r\n  devTools.subscribe((message,...args) => {\r\n    if (message.type === 'DISPATCH' && message.state) {\r\n      let newState = JSON.parse(message.state); \r\n      for(var key in newState) {\r\n        isBindDueToDevTools = true;\r\n        bind(key,newState[key]);\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nlet isARepeatKey = name => name.indexOf('__repeat') == 0;\r\n\r\nlet removeRepeatsFromState = obj => { \r\n  let newObj = util.extend({},state.boundObjects); \r\n  Object.keys(newObj).filter(isARepeatKey).forEach(k => delete newObj[k]);\r\n  return newObj;\r\n}; \r\n\r\nlet onBind = (objName,obj) => { \r\n  if(isARepeatKey(objName)) return; \r\n  var eligibleForDevTools = isBindDueToDevTools == false; \r\n  if(isBindDueToDevTools) isBindDueToDevTools = false;\r\n  if(!isARepeatKey(objName) && eligibleForDevTools) {\r\n    devTools.send(`${objName}-bound`, removeRepeatsFromState(state.boundObjects))\r\n  } \r\n  return obj;\r\n};\r\n\r\nregisterPlugin({\r\n  name: 'reduxDevToolsConnector',\r\n  postBind: onBind\r\n});"],"names":["devTools","state","simpleBind","getState","useDevTools","window","__REDUX_DEVTOOLS_EXTENSION__","isBindDueToDevTools","connect","latency","subscribe","message","type","let","newState","JSON","parse","key","bind","isARepeatKey","name","indexOf","registerPlugin","postBind","objName","obj","newObj","eligibleForDevTools","send","boundObjects","util","extend","Object","keys","filter","forEach","k"],"mappings":"iNAEA,IAIIA,oFAHAC,EAAQC,EAAWC,WAEjBC,OAA4D,IAAvCC,OAAOC,6BACpBC,GAAsB,EACjCH,IACDJ,EAAWK,OAAOC,6BAA6BE,QAAQ,CAACC,QAAS,KACxDC,mBAAWC,gEAClB,GAAqB,aAAjBA,EAAQC,MAAuBD,EAAQV,MAAO,CAChDY,IAAIC,EAAWC,KAAKC,MAAML,EAAQV,OAClC,IAAI,IAAIgB,KAAOH,EACbP,GAAsB,EACtBW,EAAKD,EAAIH,EAASG,OAM1BJ,IAAIM,WAAeC,UAAoC,GAA5BA,EAAKC,QAAQ,aAkBxCC,EAAe,CACbF,KAAM,yBACNG,kBAZYC,EAAQC,GACpB,IAAGN,EAAaK,GAAhB,CACA,IAPIE,EAOAC,EAA6C,GAAvBpB,EAK1B,OAJGA,IAAqBA,GAAsB,IAC1CY,EAAaK,IAAYG,GAC3B3B,EAAS4B,KAAQJ,YAAwCvB,EAAM4B,aAV7DH,EAASI,EAAKC,OAAO,GAAG9B,EAAM4B,cAClCG,OAAOC,KAAKP,GAAQQ,OAAOf,GAAcgB,iBAAQC,iBAAYV,EAAOU,KAC7DV,IAUAD"}